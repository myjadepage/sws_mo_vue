!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e=e||self).flowplayer=e.flowplayer||{},e.flowplayer.share=t())}(this,(function(){"use strict";var e={MOUNT:"mount",ERROR:"error",CONTEXT_MENU:"contextmenu",CLICK:"click",DBL_CLICK:"dblclick",KEYUP:"keyup",KEYDOWN:"keydown",LOAD:"load",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_ENTER:"fullscreenenter",FULLSCREEN_EXIT:"fullscreenexit",FULLSCREEN_CHANGE:"fullscreenchange",WEBKIT_NEEDKEY:"webkitneedkey",METADATA:"loadedmetadata",DATA:"loadeddata",PROGRESS:"progress",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",VOLUME_CHANGE:"volumechange",PAUSE:"pause",PLAYING:"playing",PLAY:"play",WAITING:"waiting",CAN_PLAY:"canplay",ENDED:"ended",SEEKED:"seeked",SEEKING:"seeking",DURATION_CHANGE:"durationchange",BEFORE_PLAY:"beforeplay",BEFORE_PAUSE:"beforepause",STATE:"state",CUEPOINTS:"cuepoints",CUEPOINT_START:"cuepointstart",CUEPOINT_END:"cuepointend",VIEW_ENTER:"viewenter",VIEW_LEAVE:"viewleave",SOURCE:"src",RECOVER:"recover",REAP:"reap",CONFIG:"config",QUALITIES:"qualities",SET_QUALITY:"quality:set",NON_RECOVERABLE_ERROR:"error:fatal",RECOMMENDATIONS_READY:"recommendationsready",AUDIO_ONLY_SOURCE:"audioonlysource"},t=[].slice;function n(e,t){for(var n in t)e[n]=t[n];return e}function i(e,t,n){for(t=function(e){return Array.isArray(e)?e.slice(0):e.split(".")}(t);t.length;){if(null==e)return n;e=e[t.shift()]}return null==e?n:e}var r=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}()&&{passive:!0},o=["touchstart","touchmove"];function a(e){return e.emit=function(t,i,r){r=r||{};var o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!1,!0),t}(t);return i&&n(o,{data:i||{}}),e.dispatchEvent(o),!1===r.return_self?o:e},e.on=function(t,n){return"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){return function(e){return~o.indexOf(e)}(t)?e.addEventListener(t,n,r):e.addEventListener(t,n)})),e},e.off=function(t,n){return e.removeEventListener(t,n),e},e.one=e.once=function(t,n){return e.on(t,(function i(r){e.off(t,i),n(r)}))},e}var s="",u=" ",l=Array.isArray,c="undefined"!=typeof window&&a(window),f="undefined"!=typeof document&&a(document),d=["span","a","em","p","i"],p=d.concat(["div","strong","video","img","ol","ul","li","script"]),E="__flowplayer__";function h(e,t,n){var i=v(document.createElement(e));if(l(t)&&(n=t,t=!1),l(n)||(n=[n]),i.append(n.filter((function(e){return e}))),"object"!=typeof t)return i;for(var r in t)r in i?i[r]=t[r]:i.setAttribute(r,t[r]);return i}function m(e){var n=e.tagName;e[E]=1,e.find=function(t){var n=e.querySelector(t);return n?v(n):n},e.html=function(t){return e.innerHTML=t,e},e.empty=function(){return e.innerHTML=s,e},e.offset=function(){var t={top:0,left:0},n=e;do{t.left+=n.offsetLeft||0,t.top+=n.offsetTop||0}while(n=n.offsetParent);return t},e.innerWidth=function(){var t=getComputedStyle(e);return e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)};var i=e.insert=function(t,n){return l(n)?n.map((function(n){return e.insert(t,n)}))[0]:v(n="string"==typeof n?e.insertAdjacentHTML(t,n):e.insertAdjacentElement?e.insertAdjacentElement(t,n):e.appendChild(n))};return e.append=i.bind(e,"beforeend"),e.prepend=i.bind(e,"afterbegin"),e.css=function(t,n){if("object"==typeof t){for(var i in t)e.css(i,t[i]);return e}return void 0===n?getComputedStyle(e)[t]:(1*n&&(n+="px"),e.style[t]=n,e)},e.show=function(){return e.css({display:~d.indexOf(n)?"inline":"block"})},e.hide=function(){return e.css({display:"none"})},e.remove=function(){var t=e.parentNode;t&&t.removeChild(e)},e.attr=function(t,n){return null==n?e.getAttribute(t):(e.setAttribute(t,n),e)},e.txt=function(t){return e.textContent=t,e},e.fp=function(t){return e.addClass("fp-"+t)},e.addClass=function(t){return t.split(u).forEach((function(t){e.hasClass(t)||(e.className+=(e.className?u:s)+t)})),e},e.removeClass=function(t){t=t.split(u);var n=e.className.split(u);return e.className=n.filter((function(e){return!~t.indexOf(e)})).join(" "),e},e.toggleClass=function(t,n){return void 0===n&&(n=!e.hasClass(t)),n?e.addClass(t):e.removeClass(t)},e.findAll=function(n){return i=e.querySelectorAll(n),t.call(i);var i},e.hasClass=function(t){return~e.className.split(u).indexOf(t)},e}function v(e){return void 0===e?e:function(e){return e&&e[E]}(e)?e:m(a(e))}function g(e,t){if("string"==typeof e&&"<"==e[0])return h(e.slice(1,-1),t);if("string"!=typeof e)return v(e);var n=t instanceof HTMLElement&&t.querySelector(".fp-"+e)||document.querySelector(e);return n?v(n):void 0}function _(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function C(e){var t,n,i=_("svg");return i.setAttribute("viewBox",e.coords),e.name&&i.setAttribute("class",e.name),e.title&&i.setAttribute("title",e.title),e.title&&i.setAttribute("aria-label",e.title),i.setAttribute("tabindex","0"),i.appendChild((t=e.link,(n=_("use")).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),n)),g(i)}g.window=c,g.document=f,g.el=h,p.forEach((function(e){g[e]=function(t,n){return"string"==typeof t&&(t={class:t}),h(e,t,n)}}));var O={TOGGLE_OPEN:"menu:toggle:open",RENDER:"menu:render",PUSH:"menu:push"},y={ON:"fp-on",INVIS:"fp-invis"};function A(e,i,r){var o=r.id||"menu-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);return r=r||{},e.attr("role","button").attr("aria-haspopup","true").attr("aria-expanded","false").attr("aria-controls",o).attr("aria-label",r.title),r.options=r.options||[],r.id=o,A._interface(e,i,function(){var e=t.call(arguments),i=e.shift();return e.reduce(n,i)}({},r))}A.title=function(e){return g("<h3>").txt(e)},A.close=function(t){return g.span("fp-close").on(e.CLICK,t).html("&times;")},A.option=function(t,n){var i=this,r=g("<li>").attr("tabindex","0").attr("role","menuitem"),o=i._attrs;t.icon&&r.append(C(t.icon)),r.append(g("<span>").txt(t.text)),r.on(e.CLICK,(function(e){o.multi||i.options().forEach(A.off),i.activate(n),"function"==typeof t.onclick&&t.onclick(e,t,n,i)})),r.idx=n,i.append(r)},A._interface=function(t,n,r){t.addClass("fp-menu-container");var o=g("<ul>").attr("id",r.id).addClass("fp-menu").attr("role","menu");return r.icons&&o.addClass("fp-icons"),o._attrs=r,t.on(e.CLICK,(function(e){setTimeout((function(){if(!e.defaultPrevented)return o.hasClass(y.ON)?n.emit(O.TOGGLE_OPEN,{menu:o,open:!1}):void n.emit(O.TOGGLE_OPEN,{menu:o,open:!0})}),0)})),o.on(e.MOUSE_LEAVE,(function(){n.emit(O.TOGGLE_OPEN,{menu:o,open:!1})})),n.on(O.TOGGLE_OPEN,(function(e){if(i(e,"data.menu")!==o)return o.toggleClass(y.ON,!1),t.attr("aria-expanded","false");var r=i(e,"data.open",!1);if(o.toggleClass(y.ON,r),t.attr("aria-expanded",r?"true":"false"),n.hasClass("is-accessibility"))if(r){var a=o.options()[0];a&&a.focus()}else t.focus()})),o.push=function(e){return o._attrs.options=i(o,"_attrs.options",[]),o._attrs.options.push(e),o.render()},o.select=function(e){return o.render(o.options.filter(e))},o.render=function(e){var n=o._attrs;return o.empty(),o.prepend(A.close()),n.title&&o.prepend(A.title(n.title)),n.options=e||n.options,"function"==typeof n.sort&&n.options.sort(n.sort),n.options.forEach(A.option,o),t.toggleClass(y.INVIS,0==n.options.length),o._activate(),o},o.close=function(){o.hasClass(y.ON)&&n.emit(O.TOGGLE_OPEN,{menu:o,open:!1})},o._activate=function(){o.options().forEach((function(e){e.toggleClass(y.ON,e.idx===o.idx)}))},o.options=function(){return[].slice.call(o.querySelectorAll("li"))},o.activate=function(e,t){void 0===o.idx||o.idx!==e||t?o.idx=e:delete o.idx,o._activate()},o.deactivate=function(){o.activate(o.idx)},o.render(r.options),t.appendChild(o),o},A.on=function(e){return e.addClass(y.ON),e},A.off=function(e){return e.removeClass(y.ON),e},A.CONTAINER_CLASS="fp-menu",A.Events=O,A.States=y;var N={coords:"-5 25 460 460",link:"#fp-facebook",name:"fp-facebook"},b={coords:"0 0 512 512",link:"#fp-link",name:"fp-link"},w={coords:"0 0 448 512",link:"#fp-share",name:"fp-share"},L={coords:"0 0 512 512",link:"#fp-share",name:"fp-embed"},S={coords:"0 0 512 512",link:"#fp-twitter",name:"fp-twitter"},T={FULLSCREEN:"is-fullscreen",PLAYING:"is-playing",PAUSED:"is-paused",MUTED:"is-muted",LOADED:"is-loaded",LOADING:"is-loading",STARTING:"is-starting",SEEKING:"is-seeking",GRABBING:"is-grabbing",DISABLED:"is-disabled",SMALL:"is-small",TINY:"is-tiny",RTL:"is-rtl",ENDED:"is-ended",LIVE:"is-live",ERRORED:"is-error",WAITING:"is-waiting",AUTOPLAY:"is-autoplay",SEAMLESS:"is-seamless",NO_AUTOPLAY:"no-autoplay",TOGGLING:"is-toggling",LIVE_SEEKED:"is-live-seeked",NO_DVR:"no-timeline"},R="webshare-enabled";function x(){try{return(document.querySelector("meta[name='description']")||{content:""}).content}catch(e){return""}}function I(e){if("string"==typeof e.link)return e.link;var t=document.querySelector("link[rel=canonical]");return t?t.href:window.location.toString()}var U="is-share-menu";function k(t,n,r){var o=0,a=g.span("fp-share-menu fp-menu-container").attr("tabindex","0");a.append(C(w).attr("tabindex",""));var s={prev_config:0,webshare_listener:0};r.on(e.MOUNT,(function(){var e=i(n,"ui.header.secondary");e&&e.append(a)}));var u=A(a,n,{title:r._t("share.menu_title"),icons:!0,options:[]});function l(e,t,n){return{text:(i=e,0===i.indexOf("share.")?r._t(i):i),icon:n,onclick:G.bind(null,r,u,t)};var i}r.on(e.CONFIG,(function(n){var o=i(n,"data.share",{});if(!1===o)return function(e){e.removeClass(R)}(a);if(s.prev_config!==o){if(s.prev_config=o,function(){try{return"https:"===window.location.protocol&&"function"==typeof navigator.share}catch(e){return!1}}()&&i(o,"web_share",!0))return function(e){e.addClass(R)}(a),s.webshare_listener||function(t,n,r){r.webshare_listener=!0,n.on(e.CLICK,(function(e){if(!r&&n.hasClass(R)){e.preventDefault();var r=navigator.share({title:i(t,"share.title",document.title),text:i(t,"share.text",x()),url:I(i(t,"share",{}))});r.catch((function(){}))}}))}(t,a,s);var c=[],f="string"==typeof o.link?o.link:window.location.toString();if(o.iframe){var d="string"==typeof o.iframe?o.iframe:f;c.push(l("share.embed",D.bind(null,d,r),L))}o.link&&c.push(l("share.link",P.bind(null,f),b)),o.facebook&&c.push(l("Facebook",M.bind(null,f),N)),o.twitter&&c.push(l("Twitter",H.bind(null,f),S)),u.render(c)}}));n.on(A.Events.TOGGLE_OPEN,(function(e){if(e.data&&e.data.menu===u){if(r.root.toggleClass(U,e.data.open),n.hasClass("is-small"))return(t=!!e.data)&&!r.paused&&(r.pause(),o=1),!t&&o&&(r.play(),o=0),void function(e,t,n,i){var r=i.getBoundingClientRect(),o=function(e,t){var n={top:0,left:0},i=e;for(;i.parentElement&&i.parentElement!==t;)i=i.parentElement,n.top+=i.offsetTop,n.left+=i.offsetLeft;return n}(t,i),a=(s=n,[].reduce.call(s.childNodes,(function(e,t){return e+t.getBoundingClientRect().height}),0));var s;n.css({position:"absolute",right:"auto",bottom:"auto",top:-o.top+"px",left:-o.left+"px",width:r.width+"px",height:a+"px",minHeight:r.height+"px",maxHeight:r.height+"px",margin:0})}(0,a,u,n);var t;!function(e,t,n,i){var r,o=function(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return{left:n.left-i.left,right:n.right-i.left,top:n.top-i.top,bottom:n.bottom-i.top}}(t,i),a=i.getBoundingClientRect(),s=i.hasClass("logo-on-right");r={right:"auto",left:o.right+"px",top:(s?0:o.top)+"px",bottom:"auto",width:"auto",height:"auto",minHeight:"",maxHeight:.75*a.height+"px",margin:"0.5em"},n.css(r)}(0,a,u,n)}})),r.on(e.STATE,(function(e){r.hasState("is-touched")||r.hasState("is-hovered")||!r.hasState(T.PLAYING)||u.close()}))}function G(e,t,n){t.deactivate();var i=n();i.success&&i.message&&e.message&&e.root.emit(e.message.events.SHOW_MESSAGE,{message:i.message})}function D(e,t){var n=t.videoHeight/t.videoWidth;return P('<div style="position:relative;width:100%;display:inline-block;"><iframe src="__IFRAME_SRC__" allowfullscreen style="border:none;position:absolute;top:0;left:0;width:100%;height:100%;"></iframe><div style="padding-top: __RATIO__%;"></div></div>'.replace("__IFRAME_SRC__",encodeURI(e)).replace("__RATIO__",100*n))}function P(e){var t=g.el("textarea").css({opacity:0,position:"absolute"});t.value=e;var n=g(document.body);n.append(t),t.select();var i=document.execCommand("copy");return n.removeChild(t),{success:i,message:i?"<trans share.clipboard_success trans>":"<trans share.clipboard_failure trans>"}}function M(e){return V("https://www.facebook.com/sharer.php?u="+encodeURIComponent(e)),{success:!0}}function H(e){return V("https://twitter.com/intent/tweet?url="+encodeURIComponent(e)),{success:!0}}function V(e){var t,n,i=screen.height,r=screen.width;t=Math.round(r/2-275),n=0,i>420&&(n=Math.round(i/2-210)),window.open(e,"sharer","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,left="+t+",top="+n)}return function(e,t){if("object"==typeof exports&&"undefined"!=typeof module)return t;"flowplayer"in e||(e.flowplayer={extensions:[]});var n=e.flowplayer;"function"==typeof n?n(t):(Array.isArray(n.extensions)||(n.extensions=[]),~n.extensions.indexOf(t)||n.extensions.push(t))}(window,k),k}));
